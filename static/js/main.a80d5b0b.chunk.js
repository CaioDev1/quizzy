(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(17),s=n.n(i),r=n(3),o=n(19),u=n(4),j=n(14),l=n(12),d=(n(50),n(51),n(1));var b=function(e){var t=e.type,n=void 0===t?"link":t,c=e.to,a=void 0===c?"":c,i=e.children,s=e.color,r=e.buttonType,u=void 0===r?"button":r;return"button"==n?Object(d.jsx)("button",{className:"button",type:u,style:{backgroundColor:s},children:i}):Object(d.jsx)(o.b,{to:a,className:"button",style:{backgroundColor:s},children:i})},O=(n(61),n(93));var h=function(e){var t=e.message,n=e.setIsError,a=e.active,i=Object(c.useState)(!1),s=Object(r.a)(i,2),o=s[0],u=s[1];return Object(c.useEffect)((function(){o?setTimeout((function(){return n({message:"",active:!1})}),2500):u(!0)})),Object(d.jsx)(O.a,{in:a,timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:Object(d.jsx)("div",{className:"notification",children:Object(d.jsx)("h4",{children:t})})})};n(62);var m=function(e){var t=e.team,n=e.height,c=e.width,a=e.margin;return Object(d.jsx)("div",{className:"team-icon",style:{background:"wikipedia"==t?"blue":"red",margin:a||"initial",height:n||"50px",width:c||"50px"},children:Object(d.jsx)("img",{src:"/quizzy"+("wikipedia"==t?"/Wikipedia_Logo.png":"/Brain_Logo.png")})})},v=n(44),f=n.n(v).a.create({baseURL:"https://quizzy-node-api.herokuapp.com"}),x=Object(c.createContext)({});var p=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),s=Object(r.a)(i,2),o=s[0],O=s[1],v=Object(c.useState)(!1),p=Object(r.a)(v,2),g=p[0],q=p[1],k=Object(c.useState)({message:"",active:!1}),y=Object(r.a)(k,2),z=y[0],C=y[1],E=Object(c.useState)({sabidos:!1,wikipedia:!1}),S=Object(r.a)(E,2),A=S[0],w=S[1],N=Object(c.useContext)(x),I=Object(r.a)(N,2),T=(I[0],I[1]);function R(e){w((function(t){return Object.keys(t).map((function(e){return t[e]=!1})),Object(l.a)(Object(l.a)({},t),{},Object(j.a)({},e,!0))}))}return Object(c.useEffect)((function(){z&&(document.querySelector("form button[type=submit]").textContent="ENTRAR")}),[z]),Object(d.jsxs)("div",{className:"container",id:"landing-page",children:[Object(d.jsxs)("div",{id:"title",children:[Object(d.jsx)("h1",{children:"QUIZZY"}),Object(d.jsx)("h3",{children:"Crie quizzes e desafie seus amigos!"})]}),Object(d.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),document.querySelector("form button[type=submit]").textContent="CARREGANDO",n.length&&o&&(A.sabidos||A.wikipedia)?f.post("/player/add",{username:n,quizzId:o,team:A.sabidos?"sabidos":"wikipedia"}).then((function(e){T(e.data.playerId),q(!0)})).catch((function(e){C({message:e.response.data.message,active:!0})})):C({message:"Campos n\xe3o preenchidos!",active:!0})},children:[Object(d.jsxs)("fieldset",{id:"inputs",children:[Object(d.jsx)("input",{type:"text",name:"",id:"",value:n,onChange:function(e){a(e.target.value)},placeholder:"NOME"}),Object(d.jsx)("input",{type:"number",name:"",id:"",value:o,onChange:function(e){O(e.target.value)},placeholder:"C\xd3DIGO"})]}),Object(d.jsxs)("fieldset",{id:"teams",children:[Object(d.jsxs)("div",{id:"team-sabidos",className:A.sabidos?"selected":"",onClick:function(){R("sabidos")},children:[Object(d.jsx)(m,{team:"sabidos",height:"70px",width:"70px"}),Object(d.jsx)("p",{children:"TIME SABIDOS"})]}),Object(d.jsxs)("div",{id:"team-wikipedia",className:A.wikipedia?"selected":"",onClick:function(){R("wikipedia")},children:[Object(d.jsx)(m,{team:"wikipedia",height:"70px",width:"70px"}),Object(d.jsx)("p",{children:"TIME WIKIPEDIA"})]})]}),Object(d.jsx)(b,{type:"button",buttonType:"submit",color:"#28D439",children:"ENTRAR"})]}),Object(d.jsx)(b,{to:"/create",color:"#343330",children:"CRIAR SEU QUIZZ"}),z.active&&Object(d.jsx)(h,{message:z.message,setIsError:C,active:z.active}),g&&Object(d.jsx)(u.a,{to:"/quizz/".concat(o)})]})},g=n(29),q=n(15);n(81),n(82);var k=function(e){var t=e.mark,n=e.content,c=e.selected,a=e.setQuestionValue,i=e.setCorrectAlternative,s=e.handleDeleteAlternative;return Object(d.jsxs)("div",{className:"create-question-alternative-field",children:[Object(d.jsx)("button",{className:"create-question-alternative-button ".concat(c?"selected":""),onClick:function(){i(t)},children:t}),Object(d.jsx)("input",{type:"text",name:"",id:"",value:n,onChange:function(e){a(t,e.target.value)},className:"create-question-alternative",placeholder:"TEXTO DA ALTERNATIVA"}),-1==["A","B"].indexOf(t)&&Object(d.jsx)("button",{className:"create-question-alternative-delete-button",onClick:function(){s(t)},children:"X"})]})};var y=function(e){var t=e.setQuestionList,n=e.index,a=Object(c.useState)({title:"",alternatives:[{mark:"A",content:"",correct:!1},{mark:"B",content:"",correct:!1}]}),i=Object(r.a)(a,2),s=i[0],o=i[1];function u(e){switch(e){case 2:return"C";case 3:return"D";default:throw new Error("Length greater than 4 is not accepted.")}}function j(e,t){var n=s.alternatives.map((function(n){return n.mark==e&&(n.content=t),n}));o((function(e){return e.alternatives=n,Object(l.a)({},e)}))}function b(e){var t=s.alternatives.map((function(t){return t.mark==e?t.correct=!t.correct:t.correct=!1,t}));o((function(e){return e.alternatives=t,Object(l.a)({},e)}))}function O(e){var t=s.alternatives.filter((function(t){return t.mark!=e}));t=t.map((function(e,n){return"D"==e.mark&&3==t.length&&(e.mark="C"),e})),o((function(e){return e.alternatives=t,Object(l.a)({},e)}))}return Object(c.useEffect)((function(){t((function(e){return e[n]=s,Object(q.a)(e)}))}),[s]),Object(d.jsxs)("div",{className:"create-question",children:[Object(d.jsx)("input",{type:"text",name:"",id:"",placeholder:"PERGUNTA",onChange:function(e){o((function(t){return t.title=e.target.value,Object(l.a)({},t)}))}}),Object(d.jsxs)("div",{className:"create-question-alternatives-container",children:[s.alternatives.map((function(e,t){return Object(d.jsx)(k,{mark:e.mark,content:e.content,selected:e.correct,setQuestionValue:j,setCorrectAlternative:b,handleDeleteAlternative:O},t)})),s.alternatives.length<=3&&Object(d.jsx)("button",{className:"add-alternative-button",onClick:function(){s.alternatives=s.alternatives.length<4?[].concat(Object(q.a)(s.alternatives),[{mark:u(s.alternatives.length),content:"",correct:!1}]):s.alternatives,o((function(e){return Object(l.a)({},e)}))},children:"+"})]})]})};var z=function(){var e={title:"",alternatives:[{mark:"A",content:"",correct:!1},{mark:"B",content:"",correct:!1}]},t=Object(c.useState)([e]),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)(""),o=Object(r.a)(s,2),u=o[0],j=o[1],l=Object(c.useState)(""),O=Object(r.a)(l,2),m=O[0],v=O[1],x=Object(c.useState)(""),p=Object(r.a)(x,2),k=p[0],z=p[1],C=Object(c.useState)(!1),E=Object(r.a)(C,2),S=E[0],A=E[1],w=Object(c.useState)("CRIAR"),N=Object(r.a)(w,2),I=N[0],T=N[1],R=Object(c.useState)({message:"",active:!1}),D=Object(r.a)(R,2),Q=D[0],L=D[1];return Object(d.jsxs)("div",{className:"container",id:"create-page",children:[Object(d.jsx)("h1",{children:"Sala de cria\xe7\xe3o"}),Object(d.jsxs)("main",{children:[Object(d.jsxs)("div",{className:"create-question-container",children:[a.map((function(e,t){return Object(d.jsx)(y,{setQuestionList:i,index:t},t)})),Object(d.jsx)("button",{id:"add-question",onClick:function(){i((function(t){return[].concat(Object(q.a)(t),[e])}))},children:"+"})]}),Object(d.jsxs)("form",{id:"create-question-menu",onSubmit:function(e){e.preventDefault(),function(){if(u.length&&m.length){var e,t=!0,n=Object(g.a)(a);try{for(n.s();!(e=n.n()).done;){var c=e.value;if(!c.title.length){L({message:"T\xedtulo da quest\xe3o n\xe3o preenchida",active:!0}),t=!1;break}var i,s=!1,r=Object(g.a)(c.alternatives);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.correct&&(s=!0),!o.content.length){L({message:"Texto da alternativa n\xe3o preenchida corretamente",active:!0}),t=!1;break}}}catch(j){r.e(j)}finally{r.f()}if(!t)break;if(!s){L({message:"Selecione a alternativa correta da quest\xe3o",active:!0}),t=!1;break}}}catch(j){n.e(j)}finally{n.f()}t&&(T("CARREGANDO"),f.post("/quizz/add",{owner:u,theme:m,questions:a}).then((function(e){z(e.data.quizzId),T("CRIADO"),A(!0)})).catch((function(e){L({message:e.response.data.message,active:!0})})))}else L({message:"Informa\xe7\xf5es do menu n\xe3o preenchidas corretamente",active:!0})}()},children:[Object(d.jsxs)("div",{id:"question-menu-rows",children:[Object(d.jsx)("input",{type:"text",name:"",id:"",placeholder:"Quizz de (ex: Caio Felipe)",value:u,onChange:function(e){return j(e.target.value)}}),Object(d.jsx)("input",{type:"text",name:"",id:"",placeholder:"Tema (ex: Animais)",value:m,onChange:function(e){return v(e.target.value)}}),Object(d.jsxs)("h3",{children:["Perguntas: ",Object(d.jsx)("strong",{children:a.length})]}),Object(d.jsx)("input",{type:"text",name:"",id:"",placeholder:"C\xd3DIGO GERADO",disabled:!S,value:k,onChange:function(e){return z(e.target.value)}})]}),Object(d.jsxs)("div",{id:"question-menu-buttons",children:[Object(d.jsx)(b,{to:"/",color:"#3EACEA",children:"VOLTAR"}),Object(d.jsx)(b,{type:"button",buttonType:"submit",disabled:S,color:"#55EC3D",children:I})]})]})]}),Q.active&&Object(d.jsx)(h,{message:Q.message,setIsError:L,active:Q.active})]})};n(83);var C=function(e){var t=e.mark,n=e.content,c=e.isCorrect,a=e.handleQuestionResult;return Object(d.jsxs)("button",{className:"alternative ".concat(function(e){switch(e){case null:return"";case!0:return"correct";default:return"wrong"}}(c)),onClick:function(){return a(t)},children:[Object(d.jsx)("span",{className:"alternative-mark",children:t}),Object(d.jsx)("h3",{children:n})]})};n(84);var E=function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(0),s=Object(r.a)(i,2),o=s[0],j=s[1],b=Object(c.useState)(!1),m=Object(r.a)(b,2),v=m[0],p=m[1],g=Object(c.useState)(0),q=Object(r.a)(g,2),k=q[0],y=q[1],z=Object(u.f)().quizzId,E=Object(c.useContext)(x),S=Object(r.a)(E,2),A=S[0],w=S[1],N=Object(c.useState)(!1),I=Object(r.a)(N,2),T=I[0],R=I[1],D=Object(c.useState)({message:"",active:!1}),Q=Object(r.a)(D,2),L=Q[0],G=Q[1],B=Object(c.useState)({owner:"",theme:"",questionNum:0,questions:[]}),U=Object(r.a)(B,2),M=U[0],P=U[1];function V(e){document.querySelectorAll(".alternative").forEach((function(e){e.disabled=!0})),T&&f.patch("/player/send-answer?questionId=".concat(M.questions[o].questionId,"&quizzId=").concat(z,"&playerId=").concat(A,"&chosenAlternative=").concat(e)).then((function(e){P((function(t){var n=t;return n.questions[o].alternatives.map((function(t){return t.isCorrect=e.data.correctAlternative==t.mark,t})),Object(l.a)({},n)})),y((function(t){return t+e.data.score}))})).catch((function(e){G({message:e.response.data.message,active:!0})}))}return Object(c.useEffect)((function(){f.get("/quizz/".concat(z)).then((function(e){P(e.data)})).catch((function(e){G({message:e.response.data.message,active:!0})}))}),[]),Object(c.useEffect)((function(){M.questions.length&&null!=M.questions[o].alternatives[0].isCorrect&&new Promise((function(e){setTimeout((function(){a(!1),setTimeout((function(){return e()}),300)}),800)})).then((function(){j((function(e){return e+1==M.questions.length?(w(""),p(!0),e):e+1})),a(!0)}))}),[M]),Object(c.useEffect)((function(){""==A?(G({message:"Jogador n\xe3o cadastrado.",active:!0}),setTimeout((function(){window.location="/"}),2e3)):R(!0)}),[]),Object(d.jsxs)("div",{className:"container",id:"quizz-page",children:[Object(d.jsxs)("header",{children:[Object(d.jsxs)("div",{id:"progress-container",children:[Object(d.jsxs)("h3",{children:["Quest\xe3o ",o+1," de ",M.questions.length]}),Object(d.jsx)("div",{id:"progress-bar",children:Object(d.jsx)("div",{id:"progress-bar-out",children:Object(d.jsx)("div",{id:"progress-bar-in",style:{width:"".concat(100*(o+1)/M.questions.length,"%")}})})}),Object(d.jsxs)("span",{id:"quizz-owner",children:["Quizz de ",Object(d.jsx)("strong",{children:M.owner})]})]}),Object(d.jsx)("div",{id:"score",children:Object(d.jsxs)("h3",{children:["Score ",Object(d.jsx)("br",{}),Object(d.jsx)(O.a,{in:n,timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:Object(d.jsx)("span",{children:k})})]})})]}),T&&M.questions.length&&Object(d.jsx)(O.a,{in:n,timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:Object(d.jsxs)("main",{children:[Object(d.jsx)("h1",{id:"quizz-title",children:M.questions[o].title}),Object(d.jsx)("div",{id:"alternative-container",children:M.questions[o].alternatives.map((function(e){return Object(d.jsx)(C,{mark:e.mark,content:e.content,isCorrect:e.isCorrect,handleQuestionResult:V})}))})]})}),L.active&&Object(d.jsx)(h,{message:L.message,setIsError:G,active:L.active}),v&&Object(d.jsx)(u.a,{to:"/quizz/".concat(z,"/results")})]})};n(85);var S=function(e){var t=e.place,n=e.percentage,a=Object(c.useState)(0),i=Object(r.a)(a,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){o(n)})),Object(d.jsx)("div",{className:"estatistic-bar",style:{width:"".concat(s,"%")},children:Object(d.jsxs)("h3",{children:[t,"\xb0 LUGAR - ",n,"%"]})})};n(86);var A=function(e){var t=e.username,n=e.score,c=e.team;return Object(d.jsxs)("div",{className:"player-result",children:[Object(d.jsx)(m,{team:c,margin:"0 5% 0 0"}),Object(d.jsx)("h3",{children:t}),Object(d.jsxs)("h4",{className:"player-score",children:["Total score ",Object(d.jsx)("br",{}),Object(d.jsx)("span",{children:n})]})]})},w=(n(87),n(95)),N=n(94);var I=function(){var e=Object(u.f)().quizzId,t=Object(c.useState)({players:[],questionNum:0,leaderingTeam:""}),n=Object(r.a)(t,2),a=n[0],i=n[1],s=Object(c.useState)({message:"",active:!1}),o=Object(r.a)(s,2),j=o[0],l=o[1];return Object(c.useEffect)((function(){f.get("/quizz/".concat(e,"/results")).then((function(e){i(e.data)})).catch((function(e){l({message:e.response.data.message,active:!0})}))}),[]),Object(d.jsxs)("div",{className:"container",id:"results-page",children:[Object(d.jsx)("h1",{children:"Resultados"}),Object(d.jsx)("div",{id:"estatistics-container",children:0!==a.players.length&&Object(q.a)(Array(5)).map((function(e,t){if(a.players[t])return Object(d.jsx)(S,{percentage:Math.round(100*a.players[t].score/(200*a.questionNum)),place:t+1})}))}),""!==a.leaderingTeam&&Object(d.jsx)(w.a,{direction:"left",in:!0,mountOnEnter:!0,timeout:600,children:"Empate"==a.leaderingTeam?Object(d.jsx)("h1",{id:"winner-team",style:{background:"green"},children:"Empatado!"}):Object(d.jsxs)("h1",{id:"winner-team",children:["\ud83c\udf89Time ",Object(d.jsx)("span",{children:a.leaderingTeam})," liderando!\ud83c\udf89"]})}),Object(d.jsx)(N.a,{in:!0,mountOnEnter:!0,timeout:700,children:Object(d.jsx)("div",{id:"results-container",children:a.players.map((function(e){return Object(d.jsx)(A,{username:e.username,score:e.score,team:e.team})}))})}),Object(d.jsx)(b,{to:"/",color:"#343330",children:"VOLTAR"}),j.active&&Object(d.jsx)(h,{message:j.message,setIsError:l,active:j.active})]})};var T=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.jsx)(o.a,{basename:"/",children:Object(d.jsxs)(x.Provider,{value:[n,a],children:[Object(d.jsx)(u.b,{exact:!0,path:"/",component:p}),Object(d.jsx)(u.b,{exact:!0,path:"/create",component:z}),Object(d.jsx)(u.b,{exact:!0,path:"/quizz/:quizzId",component:E}),Object(d.jsx)(u.b,{exact:!0,path:"/quizz/:quizzId/results",component:I})]})})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.a80d5b0b.chunk.js.map